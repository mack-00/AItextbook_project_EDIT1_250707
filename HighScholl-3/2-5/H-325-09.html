<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<title>문제 이해와 분석</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=0.5, maximum-scale=3, user-scalable=yes">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="format-detection" content="telephone=no">
	
	<link rel="stylesheet" href="./css/jquery-ui.min.css">
	<link rel="stylesheet" href="./css/fonts.css">
	<link rel="stylesheet" href="./css/style.css">
	<link rel="stylesheet" href="./css/common_all.css">
	<link rel="stylesheet" href="./css/swiper.css">

	<script src="https://tbacdn.kosac.re.kr/js/aidtScript.js"></script>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="./js/jquery-ui.min.js"></script>
	<script src="./js/swiper.js"></script>

	<!-- 브라우저 번역(다국어 관련) -->
	<link rel="stylesheet" href="./css/GoogleTranslate.css">
	<script type="text/javascript" src="./js/GoogleTranslate.js"></script>
	<script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=GoogleTranslateInitCallback"></script>
</head>
<body>
	<div id="wrap">
		
		<main class="H_325_09_con">
			<div class="contents_con">
				<div class="title_con">
					<div class="contents_con">
						<div class="text_bg">
							<h2 class="text" tabindex="0">스스로 해결하기</h2>
							<div class="bg"></div>
						</div>

						<div class="text_con" tabindex="0">
							<h2>
								숫자 야구 게임
							</h2>

							<h1>
								문제 이해와 분석
							</h1>
						</div>
					</div>
				</div>

				<div class="contents_con">
					<div class="text_con" tabindex="0">
						<span>두 명 이상의 플레이어가 함께 즐길 수 있는 게임을 만들어 보자.</span>
					</div>
					<!-- slider -->
					<div class="slide_wrap_con">
						<div class="slide_con">
							<div class="swiper-container H_325_09_slide">
								<div class="swiper-wrapper" role="region" aria-label="숫자 야구 게임 문제 이해와 분석 슬라이드">
									<div class="swiper-slide H_3_13_slide_01" data-swiper-autoplay="4000" role="group" aria-label="게임 이해 및 규칙 분석 내용">
										<div class="detail_con">
											<div class="left_con">
												<div class="title_con" tabindex="0">
													<span>게임 이해 및 규칙 분석</span>
												</div>
												<div class="box_con" tabindex="0">
													<span>
														&nbsp;&nbsp;숫자 야구 게임은 컴퓨터가 생각한 숫자를 플레이어가 맞추는 숫자 추측 게임이다. 
														이 게임에서는 숫자와 그 위치가 모두 맞으면 '스트라이크', 숫자만 맞으면 '볼'이라고 안내하여 숫자를 맞추는데 도움을 준다.
														<br>&nbsp;&nbsp;이 게임의 목표는 가능한 한 적은 시도 안에 숫자를 맞추는 것이다.
													</span>
												</div>
												<div class="expl_con" tabindex="0">
													<div class="title_con" tabindex="0">
														<span>예시</span>
													</div>
													<div class="text_cont">
														<dl>
															<dt tabindex="0">
																<span>컴퓨터가 생각한 숫자:</span>
															</dt>
															<dd tabindex="0">
																<span class="num_con" tabindex="0">1</span>
																<span class="num_con" tabindex="0">4</span>
																<span class="num_con" tabindex="0">6</span>
															</dd>
														</dl>
													</div>
												</div>
												<div class="list_con">
													<ul>
														<li tabindex="0">
															<span class="num_con">1</span>
															<span class="text_con">추측한 숫자: 6 1 4 → 숫자만 3개 맞았으므로, 3볼.</span>
														</li> 
														<li tabindex="0">
															<span class="num_con">2</span>
															<span class="text_con">추측한 숫자: 4 2 6 → 4는 숫자만 맞았고 6은<br>숫자와 위치 모두 맞았으므로, 1 스트라이크, 1볼.</span>
														</li>
													</ul>
												</div>
											</div>
											<div class="right_con">
												<div class="top_con">
													<div class="monitor">
														<div class="bg">
															<img src="img/H_325_09_monitor.png" alt="컴퓨터 모니터">
														</div>
														<span class="title_con" tabindex="0">숫자 야구<br>게임</span>
														<button class="after_hand" aria-label="클릭하면 다음 순서로 이동합니다."></button>
													</div>
													<div class="balloon">
														<div class="bg">
															<img src="img/H_325_09_balloon01.png" alt="컴퓨터가 생각한 숫자">
														</div>
														<span class="text_con" tabindex="0">1 4 6</span>
													</div>
												</div>
												<div class="bottom_con">
													<div class="question">
														<div class="human">
															<img src="img/H_325_09_human.png" alt="학생">
														</div>
														<div class="balloon">
															<div class="bg">
																<img src="img/H_325_09_balloon02.png" alt="학생이 생각한 숫자">
															</div>
															<span class="text_con" tabindex="0">1 2 3 ?</span>
														</div>
														<button class="after_hand" aria-label="클릭하면 다음 순서로 이동합니다."></button>
													</div>
													<div class="answer">
														<div class="monitor">
															<div class="bg">
																<img src="img/H_325_09_monitor.png" alt="컴퓨터가 모니터">
															</div>
															<span class="title_con" tabindex="0">숫자 야구<br>게임</span>
														</div>
														<div class="balloon">
															<div class="bg">
																<img src="img/H_325_09_balloon03.png" alt="컴퓨터 답변">
															</div>
															<span class="text_con" tabindex="0">1 스트라이크</span>
														</div>
														<button class="after_hand" aria-label="클릭하면 다음 순서로 이동합니다."></button>
													</div>
													<div class="question">
														<div class="human">
															<img src="img/H_325_09_human.png" alt="학생">
														</div>
														<div class="balloon">
															<div class="bg">
																<img src="img/H_325_09_balloon02.png" alt="학생이 생각한 숫자">
															</div>
															<span class="text_con" tabindex="0">4 5 6 ?</span>
														</div>
														<button class="after_hand" aria-label="클릭하면 다음 순서로 이동합니다."></button>
													</div>
													<div class="answer">
														<div class="monitor">
															<div class="bg">
																<img src="img/H_325_09_monitor.png" alt="컴퓨터 모니터">
															</div>
															<span class="title_con" tabindex="0">숫자 야구<br>게임</span>
														</div>
														<div class="balloon">
															<div class="bg">
																<img src="img/H_325_09_balloon04.png" alt="컴퓨터 답변">
															</div>
															<span class="text_con" tabindex="0">1 스트라이크, 1볼</span>
														</div>
													</div>
												</div> 
											</div>
										</div>
										<div class="btn_con">
											<button type="button" class="a_btn btn_reset" aria-label="다시 하기" style="display: none;">다시 하기</button>
										</div>
									</div>
									<div class="swiper-slide H_3_13_slide_02" data-swiper-autoplay="4000" role="group" aria-label="컴퓨터의 답이 무엇인지 적어 보자.">
										<div class="form_con">
											<div class="text_con" tabindex="0">
												<span>다음과 숫자 야구 게임을 진행했을 때, 컴퓨터의 답이 무엇인지 적어 보자.</span>
											</div>
											<div class="right_con">
												<div class="top_con">
													<div class="monitor">
														<div class="bg">
															<img src="img/H_325_09_monitor.png" alt="컴퓨터 모니터">
														</div>
														<span class="title_con" tabindex="0">숫자 야구<br>게임</span>
													</div>
													<div class="balloon">
														<div class="bg">
															<img src="img/H_325_09_balloon01.png" alt="컴퓨터 답변">
														</div>
														<span class="text_con" tabindex="0">1 9 5</span>
													</div>
												</div>
												<div class="bottom_con">
													<div class="question">
														<div class="human">
															<img src="img/H_325_09_human.png" alt="학생">
														</div>
														<div class="balloon">
															<div class="bg">
																<img src="img/H_325_09_balloon02.png" alt="학생이 생각한 숫자">
															</div>
															<span class="text_con" tabindex="0">1 5 7 ?</span>
														</div>
													</div>
													<div class="answer">
														<div class="monitor">
															<div class="bg">
																<img src="img/H_325_09_monitor.png" alt="컴퓨터 모니터">
															</div>
															<span class="title_con" tabindex="0">숫자 야구<br>게임</span>
														</div>
														<div class="balloon">
															<div class="bg">
																<img src="img/H_325_09_balloon05.png" alt="내가 생각한 답 적기">
															</div>
															<div class="input_con">
																<div class="input">
																	<label><input type="text" data-answer="1" /></label>
																</div>
																<span class="text_con" tabindex="0">스트라이크,</span>
																<div class="input">
																	<label><input type="text" data-answer="1" /></label>
																</div>
																<span class="text_con" tabindex="0">볼</span>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="btn_con">
											<button type="button" class="a_btn btn_confirm" aria-label="확인하기">확인하기</button>
											<button type="button" class="a_btn btn_reset" aria-label="다시 하기" style="display: none;">다시 하기</button>
										</div>
									</div>
								</div>
							</div>
							<div class="swiper-pagination"></div>
						</div>
						<div class="slide_btn prev swiper-button-prev H_325_09_slide_prev_btn" aria-label="슬라이드 이전 버튼" tabindex="0"></div>
						<div class="slide_btn next swiper-button-next H_325_09_slide_next_btn" aria-label="슬라이드 다음 버튼" tabindex="0"></div>
					</div>
					<!-- //slider -->					
				</div>

				<div class="popup_con_bg popup01"></div>
				<div class="popup_con popup01" role="alert"></div>

				<div class="popup_con_bg popup02"></div>
				<div class="popup_con popup02" role="alert"></div>

				<div class="popup_con_bg popup03"></div>
				<div class="popup_con popup03" role="alert"></div>

				<div class="popup_con_bg popup04"></div>
				<div class="popup_con popup04" role="alert"></div>

			</div>
		</main>
	</div>
	<script>
		$(document).ready(function(){
			//페이지 제어 시작
			const parentURL = new URL(document.referrer);
			window.parent.postMessage({
				actCd: "cont"
			}, parentURL.origin);

			let tryCount = 0;

			// 오른쪽 게임 이미지
			$(".H_325_09_con .right_con .top_con .after_hand").on("click", function(){
				$(this).addClass("off");
				$(".H_325_09_con .right_con .top_con").addClass("on");
				$(".H_325_09_con .right_con .bottom_con >div:nth-child(1)").addClass("on");
			});

			$(".H_325_09_con .right_con .bottom_con .after_hand").on("click", function(){
				$(this).addClass("off");
				$(".H_325_09_con .right_con .bottom_con > div").filter(":not(.on)").first().addClass("on");
				
			});			

			$('.H_3_13_slide_01 .question:nth-child(3) .after_hand').on("click", function(){
				$('.H_3_13_slide_01 .btn_reset').css('display','block');
			});

			$('.H_3_13_slide_01 .btn_reset').on("click", function(){
				$('.top_con, .question, .answer').removeClass('on');
				$('.monitor .after_hand, .question .after_hand').removeClass('off');	
				$(this).css('display','none');							
			});
			
			var isNull = function(){
				var result = false;
				$(".H_325_09_con input[type=text]").each(function(){
					if($(this).val() === "") {
						result = true;
						return false;
					}
				});
				return result;
			}

			var answerCheck = function() {
				var result = true;
				$(".H_325_09_con input[type=text]").each(function(){
					if($(this).val() !== $(this).attr("data-answer")) {
						result = false;
						return false;
					}
				});
				return result;
			}			

			function showAnswers() {
				$(".H_325_09_con input[type=text]").each(function () {
					$(this).val($(this).attr("data-answer"));
				});
			}

			function toggleButtons($scope, isRetry) {
				if (isRetry) {
					$scope.find(".btn_confirm").hide();
					$scope.find(".btn_reset").show();
				} else {
					$scope.find(".btn_confirm").show();
					$scope.find(".btn_reset").hide();
				}
			}

			// 정답
			$(".btn_confirm").on("click", function () {
				const $scope = $(this).closest(".swiper-slide");
				const $inputs = $scope.find("input[type=text]");
				let isEmpty = false;
				let isCorrect = true;

				$inputs.each(function () {
					const val = $(this).val();
					const answer = $(this).data("answer");
					if (val === "") isEmpty = true;
					if (val != answer) isCorrect = false;
				});

				if (isEmpty) {
					$(".popup_con_bg.popup03, .popup_con.popup03").fadeIn().delay(500).fadeOut();
					return;
				}

				if (isCorrect) {
					$(".popup_con_bg.popup02, .popup_con.popup02").fadeIn().delay(500).fadeOut();
					toggleButtons($scope, true);

				//페이지 제어 종료
				window.parent.postMessage({
					actCd: "comp"
				}, parentURL.origin);

				} else {
					tryCount++;

					if (tryCount >= 2) {
						showAnswers();
						toggleButtons($scope, true);

						// ✅ 두 번째 오답일 때 popup04 띄우기
						$(".popup_con_bg.popup04, .popup_con.popup04").fadeIn().delay(500).fadeOut();


						//페이지 제어 종료
						window.parent.postMessage({
							actCd: "comp"
						}, parentURL.origin);
					} else {
						// 첫 번째 오답일 때만 popup01 띄우기
						$(".popup_con_bg.popup01, .popup_con.popup01").fadeIn().delay(500).fadeOut();
					}
				}
			});
		});

		function toggleButtons($scope, isRetry) {
			if (isRetry) {
				$scope.find(".btn_confirm").hide();
				$scope.find(".btn_reset").show();
			} else {
				$scope.find(".btn_confirm").show();
				$scope.find(".btn_reset").hide();
			}
		}

		$(".H_3_13_slide_02 .btn_reset").on("click", function () {
			const $scope = $(this).closest(".swiper-slide");
			$scope.find("input[type=text]").val("");      
			tryCount = 0;  
			toggleButtons($scope, false); 
		});
	
		// 슬라이드
		H_325_09_slide = new Swiper ('.H_325_09_slide', {
			slidesPerView: 'auto',
			effect : 'fade', 
				fadeEffect: { 
				crossFade: true 
			},
			speed: 100,
			loop: false,
			navigation: {
				nextEl: '.H_325_09_slide_next_btn',
				prevEl: '.H_325_09_slide_prev_btn',
			},
			pagination: {
				el: ".swiper-pagination",
				clickable: true,
			},
			observer: true,
			observeParents: true,
			simulateTouch: false,
			allowTouchMove: false,
		});
	</script>

	<script>
		const contentId = 'H-325-09';
	</script>
	<script type="text/javascript" src="./js/xapi.page.js"></script>
</body>
</html>