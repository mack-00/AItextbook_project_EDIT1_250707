<!-- ë¶€ëª¨ í˜ì´ì§€ (parent.html) -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë¶€ëª¨ í˜ì´ì§€</title>
</head>
<body>
  <h1>ë¶€ëª¨ í˜ì´ì§€</h1>

  <!-- 1. iframe ì‚½ì…: srcì— ìì‹ í˜ì´ì§€ URLì„ ì§€ì • -->
  <iframe
    id="childFrame"
    src="/HighScholl-5/2-2/H-5-11.html"
    width="1600"
    height="900"
    style="border:1px solid #ccc;"
  ></iframe>

  <script>
    // 2. message ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
    window.addEventListener("message", (event) => {
      // **ë³´ì•ˆ ì²˜ë¦¬**: ë©”ì‹œì§€ë¥¼ ë³´ë‚¸ ë„ë©”ì¸ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
      const ALLOWED = "http://127.0.0.1:5500";
      if (event.origin !== ALLOWED) return;

      //console.log("âœ¨[Parent] ìˆ˜ì‹  ë°ì´í„°:", event.data);

      switch (event.data.actCd) {
        case "cont":
          console.log("â†’ âœ¨ìì‹ í˜ì´ì§€ê°€ ì‹œì‘ ì‹ í˜¸ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.",event.data);
          // ì˜ˆ) ë¡œë”© ìŠ¤í”¼ë„ˆ í‘œì‹œ
          break;
        case "comp":
          console.log("â†’ â¤ï¸â¤ï¸â¤ï¸ìì‹ í˜ì´ì§€ê°€ ì™„ë£Œ ì‹ í˜¸ë¥¼ ë³´ëƒˆìŠµë‹ˆë‹¤.",event.data,event.data);
          // ì˜ˆ) ê²°ê³¼ í‘œì‹œ, iframe ì œê±° ë“±
          break;
        default:
          //console.warn("ğŸ˜ªì•Œ ìˆ˜ ì—†ëŠ” actCd:", event.data.actCd);
      }
    });

    // (ì„ íƒ) ë¶€ëª¨ â†’ ìì‹ ë©”ì‹œì§€ ë³´ë‚´ê¸° ì˜ˆì‹œ
    const iframeEl = document.getElementById("childFrame");
    iframeEl.onload = () => {
      const targetOrigin = "http://127.0.0.1:5500";
      console.log("[Parent] ìì‹ì—ê²Œ ready ì‹ í˜¸ ì „ì†¡");
      iframeEl.contentWindow.postMessage({ actCd: "ready" }, targetOrigin);
    };
  </script>
</body>
</html>
